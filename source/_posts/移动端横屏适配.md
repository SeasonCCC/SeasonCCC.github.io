---
title: 移动端横屏适配
date: 2019-05-31 14:40:10
tags: Other
categories:
- Other
---
我们在做移动端页面的时候，绝大部分页面都是在竖屏展示。而随着用户需求的更加，开始出现了需要横屏展示的页面。那么，作为前端开发人员，如何去做横屏适配呢？本场 Chat 就来说说移动端中的横屏适配：

1. 横屏适配需求
2. 横屏适配两种实现方式
3. 横屏中使用 dom 元素
4. 横屏中使用 canvas 以及 canvas 框架
5. 横屏适配小贴士

本 Chat 主要面向于前端开发者以及从事移动端相关开发的人员。

<!-- more -->
对于大部分的 Html5 应用来说，我们可以按照屏幕的方向来分为：横屏和竖屏。在日常的开发需求中，以竖屏展示的应用为主，横屏展示的形式比较少。那么这篇文章，主要就来探讨一下，怎么样去做横屏适配。

## 横屏适配需求
在开始讲横屏适配做法之前，我们先来分析一下横屏适配的需求情况。目前 Html5 应用以及各大小程序中，横屏形式的需求不多，主要原因有下面几个：

1. 日常使用手机是竖屏形式，横屏展示的应用不方便使用
2. 竖屏的资源样式，放在横屏里面很多都不适用，特别是设计方面
3. 资料比较少，遇到问题难以解决

针对上面几个问题，我总结了下面几类使用横屏的需求：
> - 视频类 H5
> - 游戏类 H5
> - AR、 地图和重力感应等特殊需求的 H5

除了这三类以外，其他的需求都很少会需要横屏适配，所以只需要针对这几类的 H5 做好适配就基本上满足需求了。

## 横屏适配两种实现方式
日常开发中，横屏适配主要有两种实现方式：要求用户锁屏和不要求用户锁屏

### 要求用户锁屏
由于智能手机用户大部分都会开启锁屏的功能，所以大部分的横屏应用其实只需要做竖屏，只是看起来是横屏而已。

这种方法，开发起来跟竖屏差别不大，只是需要对元素做一些旋转，以及当用于没有锁屏的时候提示锁屏。

由于开发起来跟竖屏一样，所以开发难度不大，并且不需要关注兼容性问题，这方法是很多应用的首选。

### 不要求用户锁屏
而如果应用需要做到 “完美横屏” ，也就是无论用户是否锁屏也能正常展示，这样就要求兼容横屏以及竖屏两种形式。

这种方法，开发难度较大，对程序的兼容性要求极高，大部分应用都不会采用。不过如果需求确实需要或者你是一个追求完美的前端工程师，能够掌握 “完美横屏” 确实能加分不少。

> 下面就是具体是实现方式，我把横屏适配分成 dom 和 canvas 两类，原因是 dom 和 canvas 实现的方式不一样，难以程度也有所差别

## 横屏中使用 dom 元素
当我们使用 dom 元素来制作 Html5 应用的时候，在页面上展现的是文字、图片以及视频。

### 要求用户锁屏
那么，如果是要求用户锁屏的话，我们的做法其实很简单：

1. 首先横屏的时候，把遮罩层展示出来
```
@media screen and (orientation: landscape) {
  .cove {
    display: block;
  }
}
```

2. 把 dom 元素用 transform 选择 90 deg
```
transform:rotate(90deg);
-ms-transform:rotate(90deg); 	/* IE 9 */
-moz-transform:rotate(90deg); 	/* Firefox */
-webkit-transform:rotate(90deg); /* Safari 和 Chrome */
-o-transform:rotate(90deg); 	/* Opera */
```

> 这里有两点要注意：
> - 尽量把图片和视频做成横屏的形式，减少旋转的操作
> - 不要使用会在页面生成 dom 元素的插件，因为没有办法控制其选择

### 不要求用户锁屏
如果需要实现用户是否锁屏也能正常展示的话，问题就会变得很复杂了：

1. 
```
@media screen and (orientation:portrait){ ... }
@media screen and (orientation: landscape) { ...}
```
