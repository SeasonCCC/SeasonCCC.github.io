---
title: 微信H5开发之页面布局
date: 2019-03-29 10:27:00
tags: Other
categories:
- Other
---
随着微信用户数量超过 10 亿，作为 web 开发者，微信很多时候已经成为了我们 web 页面的载体，我们制作的页面几乎都会在微信上面展示和传播。于是，在开发过程中，如何去兼容微信，就成为了一个 web 开发者必须面对的问题。

微信内部的浏览器是 QQ 浏览器，微信中的 QQ 浏览器跟我们 PC 上的浏览器有很大区别。特别是当我们做 web 开发的时候，会很明显地感觉到，PC 中调试好的页面，在微信中展示出来的却不是我们想要的样子。

本场 Chat 我们先从页面布局开始说起，看看微信中那些虐过我们无数回的样式，该如何去处理：

1. 移动端自适应解决方案该如何选择
2. 如何根据不同的设计布局，来制定布局方案
3. 常用的布局方案，在不同型号手机和系统中的兼容性问题
4. 微信桌面客户端

<!-- more -->
文章开始，先带大家去简单了解一下那个让我们又爱又恨的：[微信的浏览器](https://x5.tencent.com/tbs/index.html)。微信浏览器使用了腾讯的X5内核，是腾讯基于优秀开源Webkit做了优化之后开发的，这个浏览器是专门用在手机应用上面，目前已经向APP开发者共享腾讯X5浏览服务。在其强大的功能中，有几点跟前端开发者息息相关的特性：

1. 支持 css Animation、css Transition和css Transform：支持css3主要动画属性
2. 支持 JS RequestAnimationFrame：支持js动画，能够使用动画库
3. 支持音频/视频：能够播放音频视频，并且能够控制其属性
4. 支持 Canvas 和 Webgl：能够制作复杂的动画和小游戏
5. 支持 Touch 事件：能够进行交互

这些特性跟PC的浏览器没多大区别，并且功能还挺强大的。但是在我们开发过程中就会发现，没那么简单；单单是页面布局，就有很大的学问。

## 移动端自适应解决方案该如何选择
在开始做项目之前，需要先解决一个问题：移动端适配。现在的智能手机五花八门，手机尺寸也是多得让人发紫，作为前端工程师，如何做兼容是一个大问题。那么改如何去选择移动端兼容方案呢，下面介绍几种常见的方法：

- 百分比布局
> 使用方法：通过 css 设置，高度固定，宽度设置百分比。
>
> 优势：
> 1. 显示内容多
> 2. 手机端页面能够在 PC 上展示
> 3. 没有浏览器兼容性问题
>
> 劣势：
> 1. 屏幕大，页面比例失调
> 2. 需要计算百分比

- rem布局
> 使用方法：页面中先加入一段 js （[lib-flexible](https://github.com/amfe/lib-flexible)、[hotcss](https://github.com/imochen/hotcss)等等），根据设计图的尺寸，计算对应的rem值。
>
> 例： 设计图宽度为 750px，设计图中元素宽度 100px， 换算成 rem 就是 100 / 75 = 1.3333rem。
>
> 优势：
> 1. 保证不同设备下视觉的统一
> 2. 长时间被广泛运用，兼容性较好，bug 相对较少
> 3. 在现代浏览器上，基本都支持 rem（包括微信浏览器）
>
> 劣势：
> 1. 需要加载 js 代码，增加代码大小
> 2. 网络上 rem 方案比较多，计算方式不一样，使用其他 css 库的时候，容易出现字体混乱
> 3. 无法在 PC 上使用，特别是需要兼容 IE

- vw 布局
> 使用方法：通过 css3 新属性 vw 进行兼容，把 px 单位换算成 vw 即可。
>
> 例：设计图宽度为 750px，设计图中元素宽度 100px， 换算成 vw 就是 100 / 750 * 100 = 13.3333vw。
>
> 优势：
> 1. 同 rem 布局，保证不同设备下视觉的统一
> 2. 计算方便，使用的计算方法基本上一致
> 3. 不需要加入 js 代码
> 4. 无法设置最大宽度
>
> 劣势：
> 1. 兼容性没有前两种好，在Android 4.4 以及 iOS8 以上的系统才完美支持
> 2. 在 PC 上，比 rem 布局兼容性更加差


- vw + rem 布局
> 使用方法：把 font-size 设置成 20vw， 然后根据设计稿，计算 rem。
>
> 例：设计图宽度为 750px，dpr 为 2，设计图中元素宽度 100px， 换算成 vw 就是 100 / 2 / 75 = 0.66667rem。
>
> 优势：
> 1. 同 vw 布局
> 2. 方便从 rem 布局迁移到 vw
>
> 劣势：
> 1. 同 vw 布局

四种方法，各种各的优势和不足，到底选择哪一种，其实需要看需求以及之前项目的兼容方案来选择。

在微信浏览器中，用 rem 方法比较合适，兼容性较好。如果不需要兼容 Android 4.4 以及 iOS8 以下，可以选择 vw 布局。